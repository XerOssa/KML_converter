{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>Private Assets</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="{% static  'css/private.css' %}">

</head>
<body>

<h1 style="text-align: center;">Asset value survey</h1>

<form method="post">
    {% csrf_token %}

    <p>
        {{ form.deposit.label_tag }}<br>
        {{ form.deposit }}
    </p>

    <h3>Assets</h3>

    <div id="assets">
        {% for name, value in assets.items %}
        <div class="asset-row">
            <input type="text" name="asset_name[]" value="{{ name }}">
            <input type="number" step="0.01" name="asset_value[]" value="{{ value }}">
        </div>
        {% endfor %}
    </div>

    <button type="button" onclick="addAsset()">+</button>
    <br><br>

    <button type="submit">Calculate</button>
</form>


{% if history %}
<h2 style="text-align: center;">History</h2>
<table class="history-table" cellpadding="6">
    <tr>
        <th>Date</th>
        {% for key in history.0.keys %}
            {% if key != "Date" and key != "Total" and key != "Deposit" %}
                <th>{{ key }}</th>
            {% endif %}
        {% endfor %}
        <th>Total</th>
        <th>Deposit</th>
    </tr>

    {% for row in history %}
    <tr style="text-align: right;">
        <td>{{ row.Date }}</td>
        {% for key, value in row.items %}
            {% if key != "Date" and key != "Total" and key != "Deposit" %}
                <td>{{ value }}</td>
            {% endif %}
        {% endfor %}
        <td>{{ row.Total }}</td>
        <td>{{ row.Deposit }}</td>
    </tr>
    {% endfor %}
</table>
{% endif %}



{% if chart_total_balance %}
    <h3 style="text-align: center;">Total Balance</h3>
    <img class="chart" src="{% static chart_total_balance %}">

{% endif %}

{% if chart_total_profit %}
    <h3 style="text-align: center;">Total Profit</h3>
    <img class="chart" src="{% static chart_total_profit %}">

{% endif %}

{% if chart_diversification %}
    <h3 style="text-align: center;">Asset Diversification</h3>
    <img class="chart" src="{% static chart_diversification %}">


{% endif %}

{% if chart_monthly_profit %}
    <h3 style="text-align: center;">Monthly Profit Candles</h3>
    <img class="chart" src="{% static chart_monthly_profit %}">

{% endif %}


<script>
function addAsset() {
    const div = document.createElement("div");
    div.className = "asset-row";
    div.innerHTML = `
        <input type="text" name="asset_name[]" placeholder="asset name">
        <input type="number" step="0.01" name="asset_value[]" placeholder="value">
    `;
    document.getElementById("assets").appendChild(div);
}
</script>

</body>
</html>
